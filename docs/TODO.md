# 问题清单

1. 检测鲁棒性

* 问题: 标记在快速运动或被部分遮挡时丢失检测。
* 建议: 增加运动感知预处理（运动补偿、时域平滑），并在检测后用轨迹回溯重连 ID（已实现短期记忆但需调参）。

2. 非均匀光照（半暗半亮场景）

* 问题: 全局阈值在一半暗一半亮场景下失效，导致漏检/误检。
* 建议: 添加 CLAHE（自适应直方图均衡）+ 局部多块自适应阈值作为默认预处理；在困难场景回退到 Otsu 或自适应高斯阈值；保留轻量化实时路径。

3. 运动模糊与曝光

* 问题: 快速移动导致模糊，轮廓变形影响圆检测精度。
* 建议: 引入运动去模糊（或帧间融合）、使用更宽容的轮廓拟合阈值，并结合卡尔曼预测辅助恢复。

4. 黑边 / 画面裁切干扰

* 问题: 视频四周黑边被误识别为轮廓或影响局部阈值计算。
* 建议: 自动检测黑边并裁剪/掩蔽；或在阈值计算时排除边缘区域（可配置边距）。

5. ID 持续性与重识别

* 问题: 标记短暂丢失并重现时容易重分配新 ID。
* 建议: 延长丢失记忆窗口（当前值可调），使用位置+外观（若有）+运动一致性进行复连匹配。

6. 跟踪与预测模型限制

* 问题: 线性匀速卡尔曼在高加速度/转向下预报误差增大。
* 建议: 提供更高阶模型或自适应噪声调整；保持现有多步预测接口以支持替代模型。

7. 可视化和导出

* 问题: 预测与误差可视化需要统一样式与开关选项（方案A/B/C已实现需文档化）。
* 建议: 文档列出 CLI/API 开关、默认样式、颜色/透明度配置，确保视频导出一致性。

8. 测试与基准

* 问题: 需系统化测试不同场景（光照、速度、黑边）与性能基准。
* 建议: 建立一套自动化测试视频集与复现脚本，记录精度、丢失率与帧率。

9. API 依赖与构建问题（环境相关）

* 问题: 在部分环境（Windows + Python 3.13 / 无 Rust/C 工具链）下，`pydantic-core`、`pandas` 等包编译失败。
* 建议: 在 [requirements.txt]() 中标注平台兼容性并提供预构建 wheel 或兼容版本；在 README 中列出系统依赖（Rust、MSVC、适配的 Python 版本）。

1.  前端与部署

* 问题: 前端静态文件缺失（web/dist），部署文档不完整。
* 建议: 在 [server.py]() 提供可选的 `--serve-frontend` 并在 README 加入前端构建步骤；提供 Dockerfile 作为可选简化部署路径。
